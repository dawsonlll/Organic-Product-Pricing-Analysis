---
title: "Pricing Patterns in Organic Markets"
subtitle: " Comparative Analysis of Vendor Strategies and Seasonal Trends in Organic Product Sales"
author: 
  - Dingshuo Li
thanks: "Code and data are available at: [https://github.com/dawsonlll/Organic-Product-Pricing-Analysis.git](https://github.com/RohanAlexander/starter_folder)."
date: today
date-format: long
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format:
  pdf:
    toc: true
  html:
    toc: true
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(palmerpenguins)
library(rstanarm)
library(modelsummary)
library(ggplot2)
library(arrow)
library(here)
library(modelr)
library(knitr)
library(rstanarm)
library(broom)
library(scales)
library(splines)
opts_knit$set(root.dir = here::here())
```

```{r}
#| include: false
#| warning: false
#| message: false
setwd(here::here())
organic_analysis_data <- read_parquet("data/02-analysis_data/analysis_data.parquet")
bayesian_price_model <- readRDS(file = here::here("models/bayesian_price_model.rds"))
```

# Introduction

The organic food market has witnessed a remarkable surge in demand, driven by increasing consumer awareness of health and environmental impacts. This demand has not only heightened the market value of organic products but has also introduced complexities into their pricing strategies across various retail platforms. Notably, organic food typically incurs higher production and certification costs compared to conventional food products, influencing its retail pricing and accessibility. This study aims to dissect these pricing strategies by examining how the prices of organic foods vary across different vendors and over successive months.

This paper explores the intricate dynamics of organic food pricing within a well-defined dataset that records prices from multiple vendors over a specified period. The analysis is structured to address a gap in existing research: the detailed quantification of how prices for organic products are structured and vary in a real-market scenario. Utilizing advanced Bayesian statistical methods, this research assesses the relationship between current and historical prices while considering the influence of temporal factors captured through monthly variations.

Estimand: The primary estimand of this study is the price elasticity of organic foods across different market vendors and months. Specifically, the analysis seeks to estimate how changes in the historical prices (old prices) influence the current pricing strategies, adjusting for variations across months and between vendors. This will allow us to quantify the direct and interactive effects of time (month) and vendor on the current prices of organic products, providing insights into the responsiveness of organic food prices to market dynamics and vendor-specific factors.

The findings reveal distinct pricing patterns that differ by vendor and demonstrate notable fluctuations corresponding to seasonal trends. These insights are crucial for consumers making informed purchasing decisions and for vendors strategizing to capture or expand market share in the competitive organic food sector. The importance of understanding these pricing mechanisms lies in its potential to influence marketing strategies, consumer spending, and ultimately, the economic sustainability of organic farming practices.


The paper is structured to provide a clear, logical flow from methodology to implications @sec-data outlines our dataset selection and cleaning, ensuring transparency. The @sec-model details the Bayesian model and its rationale, directly linked to our data preparation. The @sec-result displays our findings with visual aids, while the @sec-discussion interprets these findings in the context of broader market dynamics. Finally, @sec-limitation  highlights areas for further study, acknowledging any constraints encountered.







# Data {#sec-data}

## Overview

We use the statistical programming language R [@citeR].... Our data [@shelter].... Following @tellingstories, we consider...

Overview text

## Measurement
	
Some paragraphs about how we go from a phenomena in the world to an entry in the dataset.

## Outcome variables

Add graphs, tables and text. Use sub-sub-headings for each outcome variable or update the subheading to be singular.



Some of our data is of penguins (@fig-bills), from @palmerpenguins.

```{r}
#| label: fig-bills
#| fig-cap: Bills of penguins
#| echo: false

ggplot(penguins, aes(x = island, fill = species)) +
  geom_bar(alpha = 0.8) +
  scale_fill_manual(values = c("darkorange","purple","cyan4"),
                    guide = "none") +
  theme_minimal() +
  facet_wrap(~species, ncol = 1) +
  coord_flip()
```

Talk more about it.

And also planes (@fig-planes). (You can change the height and width, but don't worry about doing that until you have finished every other aspect of the paper - Quarto will try to make it look nice and the defaults usually work well once you have enough text.)

```{r}
#| label: fig-planes
#| fig-cap: Relationship between wing length and width
#| echo: false
#| warning: false
#| message: false

```

Talk way more about it. 

## Predictor variables

Add graphs, tables and text.

Use sub-sub-headings for each outcome variable and feel free to combine a few into one if they go together naturally.








# Model

The goal of our modelling strategy is twofold. Firstly,...

Here we briefly describe the Bayesian analysis model used to investigate... Background details and diagnostics are included in [Appendix -@sec-model-details].

## Model set-up

Define $y_i$ as the number of seconds that the plane remained aloft. Then $\beta_i$ is the wing width and $\gamma_i$ is the wing length, both measured in millimeters.  

\begin{align} 
y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\
\mu_i &= \alpha + \beta_i + \gamma_i\\
\alpha &\sim \mbox{Normal}(0, 2.5) \\
\beta &\sim \mbox{Normal}(0, 2.5) \\
\gamma &\sim \mbox{Normal}(0, 2.5) \\
\sigma &\sim \mbox{Exponential}(1)
\end{align}

We run the model in R [@citeR] using the `rstanarm` package of @rstanarm. We use the default priors from `rstanarm`.


### Model justification

```{r}


```


# Results

Our results are summarized in @tbl-modelresults.

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
modelsummary::modelsummary(
  list(
    "Bayesian_model" = bayesian_price_model
  ),
  statistic = "mad",
  fmt = 2
)

```

```{r}
#| echo: false
#| eval: true
#| label: tbl-modelresults
#| tbl-cap: "Explanatory models of flight time based on wing width and wing length"
#| warning: false

```




# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

Please don't use these as sub-heading labels - change them to be what your point actually is.

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {-}


# Additional data details

# Model details {#sec-model-details}

## Posterior predictive check

In @fig-ppcheckandposteriorvsprior-1 we implement a posterior predictive check. This shows...

In @fig-ppcheckandposteriorvsprior-2 we compare the posterior with the prior. This shows... 

```{r}
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| label: fig-ppcheckandposteriorvsprior
#| layout-ncol: 2
#| fig-cap: "Examining how the model fits, and is affected by, the data"
#| fig-subcap: ["Posterior prediction check", "Comparing the posterior with the prior"]

pp_check(bayesian_price_model) +
  theme_classic() +
  theme(legend.position = "bottom")

posterior_vs_prior(bayesian_price_model) +
  theme_minimal() +
  scale_color_brewer(palette = "Set1") +
  theme(legend.position = "bottom") +
  coord_flip()
```

## Diagnostics

@fig-stanareyouokay-1 is a trace plot. It shows... This suggests...

@fig-stanareyouokay-2 is a Rhat plot. It shows... This suggests...

```{r}
#| echo: false
#| eval: true
#| message: false
#| warning: false
#| label: fig-stanareyouokay
#| fig-cap: "Checking the convergence of the MCMC algorithm"
#| fig-subcap: ["Trace plot", "Rhat plot"]
#| layout-ncol: 2

plot(bayesian_price_model, "trace")

plot(bayesian_price_model, "rhat")
```



\newpage


# References


